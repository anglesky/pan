var animate_time=160;define("app/src/edit/main",["lib/jquery-lib","lib/util","lib/contextMenu/jquery-contextMenu","lib/artDialog/jquery-artDialog","../../common/core","../../tpl/copyright.html","../../tpl/search.html","../../tpl/search_list.html","../../tpl/upload.html","./edit","./preview","./preview_markdown","./tpl/markdown_preview.html","./function_list","lib/ace/src-min-noconflict/ext-modelist","./tpl/edit_tab_content.html","./taskTap","./toolbar"],function(e){e("lib/jquery-lib"),e("lib/util"),e("lib/contextMenu/jquery-contextMenu"),e("lib/artDialog/jquery-artDialog"),core=e("../../common/core"),Editor=e("./edit"),Tap=e("./taskTap"),Toolbar=e("./toolbar"),rightMenu=Tap.rightMenu,$(document).ready(function(){Editor.init(),Toolbar.init(),Tap.init(),e.async("lib/code_beautify"),$("a,img").attr("draggable","false"),setTimeout(function(){var e=window.location.href.indexOf("#filename="),t="";e>0&&(t=window.location.href.substr(e+"#filename=".length),t=urlDecode(t)),Editor.add(t)},300),$(window).bind("resize",function(){Tap.resetWidth("resize")}),window.onbeforeunload=function(){return Editor.hasFileSave()?LNG.if_save_file:void 0}})}),define("app/common/core",[],function(require,exports){loadRipple(["a","button","label",".context-menu-item","#picker"]),$("a,img").attr("draggable","false");var init_first=function(){window.require=require,core.update(),"undefined"!=typeof G&&(1!=G.is_root&&$(".menu_system_setting").remove(),G.is_root||1==AUTH["system_member:get"]||1==AUTH["system_group:get"]||$(".menu_system_group").remove())};return{init:init_first,filetype:{image:["jpg","jpeg","png","bmp","gif","ico"],music:["mp3","wma","wav","mid","m4a","aac","midi"],movie:["avi","flv","f4v","wmv","3gp","mp4","wmv","asf","m4v","mov","mpg"],doc:["doc","docx","docm","xls","xlsx","xlsb","xlsm","ppt","pptx","pptm"],text:["oexe","inc","inf","csv","log","asc","tsv","lnk","url","webloc","meta","xib","xsd","storyboard","plist","csproj","pch","pbxproj","local","xcscheme","strings","jshintrc","sublime-project","readme","changes","version","license","changelog","abap","abc","as","ada","adb","htaccess","htgroups","conf","htgroups","htpasswd","asciidoc","adoc","asm","a","ahk","bat","cmd","cpp","c","cc","cxx","h","hh","hpp","ino","c9search_results","cirru","cr","clj","cljs","cbl","cob","coffee","cf","cson","cakefile","cfm","cs","css","curly","d","di","dart","diff","patch","dockerfile","dot","dummy","dummy","e","ge","ejs","ex","exs","elm","erl","hrl","frt","fs","ldr","ftl","gcode","feature",".gitignore","glsl","frag","vert","gbs","go","groovy","haml","hbs","handlebars","tpl","mustache","hs","hx","html","htm","xhtml","eex","html.eex","erb","rhtml","html.erb","ini","conf","cfg","prefs","io","jack","jade","java","js","jsm","jsx","json","jq","jsp","jsx","jl","tex","latex","ltx","bib","lean","hlean","less","liquid","lisp","ls","logic","lql","lsl","lua","lp","lucene","makefile","gnumakefile","makefile","ocamlmakefile","make","md","markdown","mask","matlab","mz","mel","mc","mush","mysql","nix","nsi","nsh","m","mm","ml","mli","pas","p","pl","pm","pgsql","php","phtml","shtml","php3","php4","php5","phps","phpt","aw","ctp","module","ps1","praat","praatscript","psc","proc","plg","prolog","properties","proto","py","r","cshtml","rd","rhtml","rst","rb","ru","gemspec","rake","guardfile","rakefile","gemfile","rs","sass","scad","scala","scm","sm","rkt","oak","scheme","scss","sh","bash","bashrc","sjs","smarty","tpl","snippets","soy","space","sql","sqlserver","styl","stylus","svg","swift","tcl","tex","txt","textile","toml","twig","swig","ts","typescript","str","vala","vbs","vb","vm","v","vh","sv","svh","vhd","vhdl","wlk","wpgm","wtest","xml","rdf","rss","wsdl","xslt","atom","mathml","mml","xul","xbl","xaml","xq","yaml","yml"],bindary:["pdf","bin","zip","swf","gzip","rar","arj","tar","gz","cab","tbz","tbz2","lzh","uue","bz2","ace","exe","so","dll","chm","rtf","odp","odt","pages","class","psd","ttf","fla","7z","dmg","iso","dat","ipa","lib","a","apk","so","o"]},fileOpenMode:{ini:["inc","inf"],xml:["xib","xsd","storyboard","plist","csproj","pch","pbxproj","local","xcscheme","strings"],json:["oexe","jshintrc","sublime-project"],markdown:["readme","changes","version","license","changelog"]},ico:function(e){var t=["edit","search","upload","setting","appStore","error","info"],a=["folder","file","mp3","flv","pdf","doc","xls","ppt","html","swf","php","js","zip","rar","txt","jpg"];return $.inArray(e,t)>=0?G.static_path+"images/file_icon/icon_others/"+e+".png":$.inArray(e,a)>=0?G.static_path+"images/file_icon/file_16/"+e+".png":G.static_path+"images/file_icon/file_16/file.png"},contextmenu:function(e){try{rightMenu.hidden()}catch(t){}var t=e||window.event;return t?t&&$(t.target).is("textarea")||$(t.target).is("input")||$(t.target).is("p")||$(t.target).is("pre")||0!=$(t.target).parents(".can_right_menu").length||0!=$(t.target).parents(".topbar").length||0!=$(t.target).parents(".edit_body").length||0!=$(t.target).parents(".aui_state_focus").length?!0:!1:!0},pathThis:function(e){if(!e||"/"==e)return"";e=e=this.pathClear(e);var t=e.lastIndexOf("/"),a=e.substr(t+1);if(0==a.search("fileProxy")){a=urlDecode(a.substr(a.search("&path=")));var i=a.split("/");a=i[i.length-1],""==a&&(a=i[i.length-2])}return a},pathClear:function(e){return e=e.replace(/\\/g,"/"),e=rtrim(e,"/"),e=e.replace(/\/+/g,"/")},pathFather:function(e){e=this.pathClear(e);var t=e.lastIndexOf("/");return e.substr(0,t+1)},pathExt:function(e){return e=trim(e,"/"),-1!=e.lastIndexOf("/")&&(e=e.substr(e.lastIndexOf("/")+1)),-1!=e.lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1).toLowerCase():e.toLowerCase()},path2url:function(e){if("http"==e.substr(0,4))return e;if(e=e.replace(/\\/g,"/"),e=rtrim(e,"/"),e=e.replace(/\/+/g,"/"),e=e.replace(/\/\.*\//g,"/"),G.is_root&&e.substring(0,G.web_root.length)==G.web_root)return G.web_host+e.replace(G.web_root,"");var t=G.app_host+"/index.php?explorer/fileProxy&path="+urlEncode(e);return G.share_page!==void 0&&(t=G.app_host+"/index.php?share/fileProxy&user="+G.user+"&sid="+G.sid+"&path="+urlEncode(e)),t},path_can_read:function(e){if("object"!=typeof G.json_data)return!0;var t;t=G.json_data.filelist;for(var a=0;t.length>a;a++)if(t[a].path==e)return void 0==t[a].is_readable||1==t[a].is_readable?!0:!1;t=G.json_data.folderlist;for(var a=0;t.length>a;a++)if(t[a].path==e)return void 0==t[a].is_readable||1==t[a].is_readable?!0:!1;return!0},authCheck:function(e,t){return G.is_root?!0:AUTH.hasOwnProperty(e)?AUTH[e]?!0:(void 0==t&&(t=LNG.no_permission),core.tips.tips(t,!1),!1):!0},ajaxError:function(e){core.tips.close(LNG.system_error,!1);var t=e.responseText,a='<div class="ajaxError">'+t+"</div>",i=$.dialog.list.ajaxErrorDialog;return"<!--user login-->"==t.substr(0,17)?(window.location.reload(),void 0):(i?i.content(a):$.dialog({id:"ajaxErrorDialog",padding:0,width:"60%",height:"50%",fixed:!0,resize:!0,ico:core.ico("error"),title:"ajax error",content:a}),void 0)},file_get:function(e,t){var a="./index.php?editor/fileGet&filename="+urlEncode2(e);G.share_page!==void 0&&(a="./index.php?share/fileGet&user="+G.user+"&sid="+G.sid+"&filename="+urlEncode2(e)),$.ajax({url:a,dataType:"json",beforeSend:function(){core.tips.loading(LNG.loading)},error:core.ajaxError,success:function(e){core.tips.close(LNG.success),"function"==typeof t&&t(e.data.content)}})},path_select:function(e,t,a){var i=UUID(),n="./index.php?/explorer&type=iframe&path_select="+e+"&uuid_key="+i,o=$.dialog.open(n,{id:i,resize:!0,fixed:!0,ico:core.ico("folder"),title:t,width:840,height:420,ok:function(){if("function"==typeof a){var e=o.DOM.wrap,t=e.find(".path_select_input").val();t&&a(t)}},cancel:!0}),s=o.DOM.wrap;s.find(".aui_buttons").css("padding","15px"),$('<input type="text" class="path_select_input"/>').insertBefore(s.find(".aui_state_highlight"))},path_select_change:function(e,t){var a=$("."+e).find(".path_select_input");a.val(t).textFocus()},setting:function(e){void 0==e&&(e=G.is_root?"system":"user"),ShareData.frameTop("Opensetting_mode")?ShareData.frameTop("Opensetting_mode",function(t){t.Setting.setGoto(e),t.$.dialog.list.setting_mode.display(!0)}):$.dialog.open("./index.php?setting#"+e,{id:"setting_mode",fixed:!0,ico:core.ico("setting"),resize:!0,title:LNG.setting,width:960,height:600})},copyright:function(){var e=require("../tpl/copyright.html"),t=template.compile(e),a=t({LNG:LNG,G:G});art.dialog.through({id:"copyright_dialog",bottom:0,right:0,simple:!0,resize:!1,title:LNG.about+" kod",width:425,padding:"0",fixed:!0,content:a}),$(".copyright_dialog").addClass("animated-700 zoomIn")},qrcode:function(e){"./"==e.substr(0,2)&&(e=G.app_host+e.substr(2));var t="./index.php?user/qrcode&url="+urlEncode(e),a="<a href='"+e+"' target='_blank'><img src='"+t+"' style='border:1px solid #eee;'/></a>";$.dialog({fixed:!0,resize:!1,title:LNG.qrcode,padding:30,content:a})},appStore:function(){$.dialog.open("./index.php?app",{id:"app_store",fixed:!0,ico:core.ico("appStore"),resize:!0,title:LNG.app_store,width:900,height:550})},openIE:function(e){$.dialog.open(e,{fixed:!0,resize:!0,title:LNG.app_store,width:"80%",height:"70%"})},openApp:function(app){if("url"==app.type){var icon=app.icon;-1==app.icon.search(G.static_path)&&"http"!=app.icon.substring(0,4)&&(icon=G.static_path+"images/app/"+app.icon),app.width="number"!=typeof app.width&&-1==app.width.search("%")?parseInt(app.width):"80%","number"!=typeof app.height&&-1==app.height.search("%")?app.height=parseInt(app.height):app.width="60%";var dialog_info={resize:app.resize,fixed:!0,ico:icon,title:app.name.replace(".oexe",""),width:app.width,height:app.height,simple:app.simple,padding:0};"swf"==core.pathExt(app.content)?(dialog_info.content=core.createFlash(app.content),$.dialog(dialog_info)):$.dialog.open(app.content,dialog_info)}else{var exec=app.content;eval("{"+exec+"}")}},update:function(e){setTimeout(function(){var t=base64_decode("aHR0cDovL3N0YXRpYy5rYWxjYWRkbGUuY29tL3VwZGF0ZS9tYWluLmpz")+"?a="+UUID();require.async(t,function(t){try{t.todo(e)}catch(a){}})},3e3)},open_path:function(e){"undefined"!=typeof Config&&"explorer"==Config.pageApp?ui.path.list(e,"tips"):core.explorer(e)},explorer:function(e,t){void 0==e&&(e=""),void 0==t&&(t=core.pathThis(e));var a="./index.php?/explorer&type=iframe&path="+e;G.share_page!==void 0&&(a="./index.php?share/folder&type=iframe&user="+G.user+"&sid="+G.sid+"&path="+e),$.dialog.open(a,{resize:!0,fixed:!0,ico:core.ico("folder"),title:t,width:880,height:550})},explorerCode:function(e){void 0==e&&(e="");var t="index.php?/editor&project="+e;G.share_page!==void 0&&(t="./index.php?share/code_read&user="+G.user+"&sid="+G.sid+"&project="+e),window.open(t)},setSkin_finished:function(){var e=$(".setSkin_finished").attr("src");e&&($("#link_css_list").attr("href",e),$(".setSkin_finished").remove())},setSkin:function(e){console.log(window.location.href,e);var t=G.static_path+"style/skin/"+e+".css";$("body").append('<img src="'+t+'" onload="core.setSkin_finished();" onerror="core.setSkin_finished();" class="setSkin_finished">')},editorFull:function(){var e=$("iframe[name=OpenopenEditor]");e.toggleClass("frame_fullscreen")},language:function(e){Cookie.set("kod_user_language",e,8760),window.location.reload()},tips:{topHeight:function(){return 1==$(".topbar").length?$(".topbar").height():0},loading:function(e){Tips.loading(e,"info",core.tips.topHeight())},close:function(e,t){"object"==typeof e?Tips.close(e.data,e.code,core.tips.topHeight()):Tips.close(e,t,core.tips.topHeight())},tips:function(e,t){"object"==typeof e?Tips.tips(e.data,e.code,core.tips.topHeight()):Tips.tips(e,t,core.tips.topHeight())}},fullScreen:function(){"true"==$("body").attr("fullScreen")&&core.exitfullScreen(),$("body").attr("fullScreen","true");var e=ShareData.frameTop(),t=e.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},exitfullScreen:function(){$("body").attr("fullScreen","false"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},createFlash:function(e,t,a){var i=UUID();(a===void 0||""==a)&&(a=i);var n='<object type="application/x-shockwave-flash" class="'+i+'" id="'+a+'" data="'+e+'" width="100%" height="100%">'+'<param name="movie" value="'+e+'"/>'+'<param name="allowfullscreen" value="true" />'+'<param name="allowscriptaccess" value="always" />'+'<param name="flashvars" value="'+t+'" />'+'<param name="wmode" value="transparent" />'+'</object><div class="aui_loading" id="'+i+'_loading"><span>loading..</span></div>';return setTimeout(function(){var e=$("."+i);if(1!=e.length){var t=ShareData.frameTop();e=t.$("."+i)}if(1==e.length)var a=0,n=e[0],o=setInterval(function(){try{a++,100==Math.floor(n.PercentLoaded())?(e.next(".aui_loading").remove(),clearInterval(o),o=null):a>100&&(e.next(".aui_loading").remove(),clearInterval(o),o=null)}catch(t){}},100)},50),n},search:function(e,t){var a,i,n=require("../tpl/search.html"),o=require("../tpl/search_list.html"),s=function(){var o=trim(core.pathClear(t),"/");if(0==o.indexOf(G.KOD_USER_SHARE)&&-1==o.indexOf("/"))return core.tips.tips(LNG.path_cannot_search,!1),void 0;var s=template.compile(n);0==$(".dialog_do_search").length?(i={search:e,path:t,is_content:void 0,is_case:void 0,ext:""},"editor"==Config.pageApp&&(i.is_content=1,i.is_case=1),a=$.dialog({id:"dialog_do_search",padding:0,fixed:!0,ico:core.ico("search"),resize:!0,title:LNG.search,height:480,content:s({param:i,LNG:LNG})}),c(i),l(),$("#search_ext").tooltip({placement:"bottom",html:!0}),$("#search_path").tooltip({placement:"bottom",html:!0,title:function(){return $("#search_path").val()}})):($("#search_value").val(e),$("#search_path").val(t),r(),$.dialog.list.dialog_do_search.display(!0))},r=function(){i={search:$("#search_value").val(),path:$("#search_path").val(),is_content:$("#search_is_content").attr("checked"),is_case:$("#search_is_case").attr("checked"),ext:$("#search_ext").val()},c(i)},l=function(){$("#search_value").die("keyup").live("keyup",function(){"editor"==!Config.pageApp&&ui.path.setSearchByStr($(this).val())}),$("#search_value,#search_ext,#search_path").keyEnter(r),$(".search_header a.button").die("click").live("click",r),$(".search_result .list .name a").die("click").live("click",function(){var e=$(this).parent().parent().attr("data-path"),t=$(this).parent().parent().attr("data-type");if($(this).parent().parent().hasClass("file")){var a=core.pathExt(e);i.is_content&&inArray(core.filetype.text,a)&&ShareData.data("FILE_SEARCH_KEY",$("#search_value").val()),ui.pathOpen.open(e,t)}else core.open_path(e+"/")}),$(".search_result .list .path a").die("click").live("click",function(){var e=core.pathFather($(this).html());core.open_path(e)})},c=function(e){var t=150;$("#search_value").textFocus(),$(".search_result .list").remove();var a=$(".search_result .message td");if(!e.search||!e.path)return a.hide().html(LNG.search_info).fadeIn(t),void 0;e.search=urlEncode(e.search),e.path=urlEncode(e.path);var i="index.php?explorer/search";G.share_page!==void 0&&(i="index.php?share/search&user="+G.user+"&sid="+G.sid),$.ajax({url:i,dataType:"json",type:"POST",data:e,beforeSend:function(){a.hide().html(LNG.searching+'<img src="'+G.static_path+'images/loading.gif">').fadeIn(t)},error:core.ajaxError,success:function(e){if(!e.code)return a.hide().html(e.data).fadeIn(t),void 0;if(0==e.data.filelist.length&&0==e.data.folderlist.length)return a.hide().html(LNG.search_null).fadeIn(t),void 0;a.hide();var i=template.compile(o);for(var n in e.data)if("filelist"==n||"folderlist"==n)for(var s=0;e.data[n].length>s;s++)e.data[n][s].size=core.file_size(e.data[n][s].size);e.data.LNG=LNG,$(i(e.data)).insertAfter(".search_result .message")}})};s()},server_dwonload:function(e,t){core.upload_check("explorer:serverDownload");var a=$(".download_box"),i=a.find("#download_list");if(a.find("input").val(""),!e)return core.tips.tips("url false!",!1),void 0;"http"!=e.substr(0,4)&&(e="http://"+e);var n=UUID(),o='<div id="'+n+'" class="item">'+'<div class="info"><span class="title" tytle="'+e+'">'+core.pathThis(e)+"</span>"+'<span class="size">0b</span>'+'<span class="state">'+LNG.upload_ready+"</span>"+'<a class="remove font-icon icon-remove" href="javascript:void(0)"></a>'+'<div style="clear:both"></div></div></div>';i.find(".item").length>0?$(o).insertBefore(i.find(".item:eq(0)")):i.append(o);var s,r,l,c=0,d=$("#"+n),p=$("#"+n+" .state").text(LNG.download_ready),u=$('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%;text-align:right;"></div></div>').appendTo("#"+n).find(".progress-bar");$("#"+n+" .remove").bind("click",function(){clearInterval(s),s=!1,clearTimeout(r),r=!1,$.get("./index.php?explorer/serverDownload&type=remove&uuid="+n),$(this).parent().parent().slideUp(function(){$(this).remove(),ui.f5()})}),$.ajax({url:"./index.php?explorer/serverDownload&type=download&save_path="+t+"&url="+urlEncode2(e)+"&uuid="+n,dataType:"json",error:function(e,t,a){core.ajaxError(e,t,a),clearInterval(s),s=!1,clearTimeout(r),r=!1,u.parent().remove(),p.addClass("error").text(LNG.download_error)},success:function(e){clearInterval(s),s=!1,clearTimeout(r),r=!1,e.code?(ui.f5_callback(function(){ui.path.setSelectByFilename(e.info)}),p.text(LNG.download_success),$("#"+n+" .info .title").html(e.info)):p.addClass("error").text(LNG.error),u.parent().remove()}});var h=function(){$.ajax({url:"./index.php?explorer/serverDownload&type=percent&uuid="+n,dataType:"json",success:function(e){var t="",a=e.data;if(s){if(!e.code)return p.text(LNG.loading),void 0;if(a){if(a.size=parseFloat(a.size),a.time=parseFloat(a.time),l){var i=(a.size-l.size)/(a.time-l.time);if(c>.2*i){var n=c;c=i,i=n}else c=i;t=core.file_size(i)+"/s"}if(0==a.length)d.find(".progress-bar").css("width","100%").text(LNG.loading);else{var o=100*(a.size/a.length);d.find(".progress-bar").css("width",o+"%"),p.text(parseInt(o)+"%("+t+")")}d.find(".size").text(core.file_size(a.length)),l=a}}}})};r=setTimeout(function(){h(),s=setInterval(function(){h()},1e3)},100)},user_space_html:function(e){var t=e.split("/"),a=parseFloat(t[0]),i=1073741824*parseFloat(t[1]),n=core.file_size(parseFloat(t[0])),o=core.file_size(i),s=n+"/",r=100*a/i;return r>=100&&(r=100),0==i||isNaN(i)?(s+=LNG.space_tips_full,r="0%"):(s+=o,r+="%"),s="<div class='space_info_bar'><div class='space_process'><div class='space_process_use' style='width:"+r+"'></div></div>"+"<div class='space_info'>"+s+"</div>"+"</div>"},file_size:function(e,t){if(void 0==e&&(e=0),void 0==t&&(t=1),1024>=e)return parseInt(e)+"B";e=parseInt(e);var a={G:1073741824,M:1048576,K:1024,B:1};for(var i in a)if(e>=a[i])return(e/a[i]).toFixed(t)+i},upload_check:function(e){return"share"==G.share_page?"1"==G.share_info.can_upload:(void 0==e&&(e="explorer:fileUpload"),!G.is_root&&AUTH.hasOwnProperty(e)&&1!=AUTH[e]?(core.tips.tips(LNG.no_permission,!1),!1):G.json_data&&!G.json_data.info.can_upload?(core.tips.tips(LNG.no_permission_write,!1),!1):!0)},upload:function(){var e="index.php?explorer/fileUpload";if("share"==G.share_page&&"1"==G.share_info.can_upload&&(e="index.php?share/fileUpload&user="+G.user+"&sid="+G.sid),uploader.option("server",e),0!=$(".dialog_file_upload").length)return $.dialog.list.dialog_file_upload.display(!0),void 0;var t=require("../tpl/upload.html"),a=template.compile(t),i=WebUploader.Base.formatSize(G.upload_max);$.dialog({padding:5,resize:!0,ico:core.ico("upload"),id:"dialog_file_upload",fixed:!0,title:LNG.upload_muti,content:a({LNG:LNG,maxsize:i}),close:function(){$.each(uploader.getFiles(),function(e,t){uploader.skipFile(t),uploader.removeFile(t)}),$.each($("#download_list .item"),function(){$(this).find(".remove").click()})}}),$(".file_upload .tips").tooltip({placement:"bottom"}),$(".file_upload .top_nav a.menu").unbind("click").bind("click",function(){$(this).hasClass("tab_upload")?($(".file_upload .tab_upload").addClass("this"),$(".file_upload .tab_download").removeClass("this"),$(".file_upload .upload_box").removeClass("hidden"),$(".file_upload .download_box").addClass("hidden")):($(".file_upload .tab_upload").removeClass("this"),$(".file_upload .tab_download").addClass("this"),$(".file_upload .upload_box").addClass("hidden"),$(".file_upload .download_box").removeClass("hidden"))}),$(".download_box [name=url]").keyEnter(function(){core.server_dwonload($(".download_box input").val(),G.this_path)}),$(".file_upload .download_box .download_start").unbind("click").bind("click",function(){core.server_dwonload($(".download_box input").val(),G.this_path)}),$(".file_upload .download_box .download_start_all").unbind("click").bind("click",function(){$.dialog({id:"server_dwonload_textarea",fixed:!0,resize:!1,ico:core.ico("upload"),width:"420px",height:"270px",padding:10,title:LNG.download,content:"<textarea style='width:400px;height:250px;border:1px solid #ddd;'></textarea>",ok:function(){for(var e=$(".server_dwonload_textarea textarea").val().split("\n"),t=0;e.length>t;t++)core.server_dwonload(e[t],G.this_path)}})}),"share"==G.share_page&&$(".top_nav").addClass("hidden"),uploader.addButton({id:"#picker"})},upload_init:function(){var e="#thelist",t=!0;$.browser.msie&&(t=!1);var a=10485760;a>=G.upload_max&&(a=.5*G.upload_max),uploader=WebUploader.create({swf:G.static_path+"js/lib/webuploader/Uploader.swf",dnd:"body",threads:2,compress:!1,resize:!1,prepareNextFile:!0,duplicate:!0,chunked:t,chunkRetry:3,chunkSize:a}),$("#uploader .success").die("click").live("click",function(){var e=$(this).find("span.title").attr("title");"explorer"==Config.pageApp?ui.path.list(core.pathFather(e),"tips",function(){ui.path.setSelectByFilename(core.pathThis(e))}):core.explorer(core.pathFather(e))}),$("#uploader .open").die("click").live("click",function(e){var t=$(this).find("span.title").attr("title");ui.pathOpen.open(t),stopPP(e)}),$(".upload_box_clear").die("click").live("click",function(){$("#thelist .item.success,#thelist .item.error").each(function(){$(this).slideUp(300,function(){$(this).remove()})})}),$("#uploader .remove").die("click").live("click",function(e){var t=$(this).parent().parent().attr("id");$(this).parent().parent().slideUp(function(){$(this).remove()}),uploader.skipFile(t),uploader.removeFile(t,!0),stopPP(e)});var i=0,n=0,o="0B/s",s=0,r=function(e,t){if(.3>=time_float()-s)return o;s=time_float();var a=e.size*t,i=5;e.speed===void 0?e.speed=[[time_float()-.5,0],[time_float(),a]]:i>=e.speed.length?e.speed.push([time_float(),a]):(e.speed=e.speed.slice(1,i),e.speed.push([time_float(),a]));var n=e.speed[e.speed.length-1],r=e.speed[0],l=(n[1]-r[1])/(n[0]-r[0]);return l=core.file_size(l)+"/s",o=l,l},l=[];uploader.on("fileQueued",function(t){if(!core.upload_check())return uploader.skipFile(t),uploader.removeFile(t),void 0;var a,n=$(e),a=t.fullPath;t.finished=!1,t.upload_to=urlDecode(G.this_path),(void 0==a||"undefined"==a)&&(a=t.name),i++,$(e).find(".item").length>0&&(n=$(e).find(".item:eq(0)"));var o='<div id="'+t.id+'" class="item"><div class="info">'+'<span class="title" title="'+G.this_path+a+'">'+core.pathThis(a)+"</span>"+'<span class="size">'+core.file_size(t.size)+"</span>"+'<span class="state">'+LNG.upload_ready+"</span>"+'<a class="remove font-icon icon-remove" href="javascript:void(0)"></a>'+'<div style="clear:both"></div></div></div>';$(e).find(".item").length>0?$(o).insertBefore($(e).find(".item:eq(0)")):$(e).append(o),uploader.upload()}).on("uploadBeforeSend",function(e,t){var a=urlEncode(e.file.fullPath);(void 0==a||"undefined"==a)&&(a=""),t.fullPath=a,t.upload_to=e.file.upload_to}).on("uploadProgress",function(e,t){$(".dialog_file_upload .aui_title").text(LNG.uploading+": "+n+"/"+i+" ("+o+")");var a=r(e,t),s=$("#"+e.id),l=s.find(".progress .progress-bar");l.length||(l=$('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%"></div></div>').appendTo(s).find(".progress-bar")),s.find(".state").text(parseInt(100*t)+"%("+a+")"),l.css("width",100*t+"%")}).on("uploadAccept",function(e,t){e.file.serverData=t;try{l.push(core.pathThis(t.info))}catch(a){}}).on("uploadSuccess",function(e){var t=36*$("#"+e.id).index(".item");$("#uploader").scrollTop(t),n++;var a=e.serverData;if(a.code?($("#"+e.id).addClass("success"),$("#"+e.id).find(".state").text(a.data),$("#"+e.id).find(".remove").removeClass("icon-remove").addClass("icon-ok").addClass("open").removeClass("remove")):($("#"+e.id).addClass("error").find(".state").addClass("error"),$("#"+e.id).find(".state").text(a.data).attr("title",a.data)),uploader.removeFile(e),$("#"+e.id).find(".progress").fadeOut(),!e.fullPath){var i=l;ui.f5_callback(function(){ui.path.setSelectByFilename(i)})}}).on("uploadError",function(e,t){n++,$("#"+e.id).find(".progress").fadeOut(),$("#"+e.id).addClass("error").find(".state").addClass("error"),$("#"+e.id).find(".state").text(LNG.upload_error+"("+t+")")}).on("uploadFinished",function(){$(".dialog_file_upload .aui_title").text(LNG.upload_success+": "+n+"/"+i),i=0,n=0,uploader.reset();var e=l;if(ui.f5_callback(function(){ui.path.setSelectByFilename(e),l=[]}),"explorer"==Config.pageApp){if("share"==G.share_page)return;ui.tree.checkIfChange(G.this_path)}}).on("error",function(e){core.tips.tips(e,!1)});var c;inState=!1,dragOver=function(){0==inState&&(inState=!0,MaskView.tips(LNG.upload_drag_tips)),c&&window.clearTimeout(c)},dragLeave=function(e){stopPP(e),c&&window.clearTimeout(c),c=window.setTimeout(function(){inState=!1,MaskView.close()},100)},dragDrop=function(e){try{if(e=e.originalEvent||e,core.upload_check()){var t=e.dataTransfer.getData("text/plain");t&&"http"==t.substring(0,4)?ui.pathOperate.appAddURL(t):core.upload()}stopPP(e)}catch(e){}inState&&(inState=!1,MaskView.close())}}}}),define("app/tpl/copyright.html",[],'<div class="copyright_dialog_content">\n	<div class="title">\n		<div class="logo"><i class="icon-cloud"></i>KodExplorer v{{G.version}}</div>\n		<div class=\'info\'>——{{LNG.kod_name_copyright}}</div>\n	</div>\n	<div class="content">\n		<p>{{#LNG.copyright_desc}}</p>\n		<div>{{#LNG.copyright_contact}}</div>\n		<div>{{#LNG.copyright_info}}</div> \n	</div>\n</div>'),define("app/tpl/search.html",[],"<div class='do_search'>\n    <div class='search_header'>\n       <div class='s_br'>\n            <input type='text' id='search_value' value='{{param.search}}'/><a class='right button icon-search'></a>\n            <div style='float:right'>{{LNG.path}}:<input type='text' id='search_path' value='{{param.path}}'/></div>\n        </div>\n       <div class='s_br'>\n            <input type='checkbox' id='search_is_case' {{if param.is_case}}checked='true'{{/if}}/>\n            <label for='search_is_case'>{{LNG.search_uplow}}</label>\n            <input type='checkbox' id='search_is_content' {{if param.is_content}}checked='true'{{/if}}/>\n            <label for='search_is_content'>{{LNG.search_content}}</label>\n            <div style='float:right'>{{LNG.file_type}}:<input type='text' id='search_ext' value='{{param.ext}}' title='{{LNG.search_ext_tips}}'/></div>\n        </div>\n    </div>\n    <div class='search_result'>\n        <table border='0' cellspacing='0' cellpadding='0'>\n            <tr class='search_title'>\n               <td class='name'>{{LNG.name}}</td>\n               <td class='type'>{{LNG.type}}</td>\n               <td class='size'>{{LNG.size}}</td>\n               <td class='path'>{{LNG.path}}</td>\n            </tr>\n            <tr class='message'><td colspan='4'></td></tr>\n        </table>\n    </div>\n</div>\n\n"),define("app/tpl/search_list.html",[],"{{each folderlist as v i}}\n    <tr class='list folder' data-path='{{v.path}}' data-type='folder' data-size='0'>\n        <td class='name'><a href='javascript:void(0);' title='{{LNG.open}}{{v.name}}'>{{v.name}}</a></td>\n        <td class='type'>{{LNG.folder}}</td>\n        <td class='size'>0</td>\n        <td class='path'><a href='javascript:void(0);' title='{{LNG.goto}}{{v.path}}'>{{v.path}}</a></td>\n    </tr>\n{{/each}}\n{{each filelist as v i}}\n<tr class='list file'\n    data-path='{{v.path}}' \n    data-type='{{v.ext}}' \n    data-size='{{v.size}}'>\n    <td class='name'>\n        <a href='javascript:void(0);' title='{{LNG.open}}{{v.name}}'>{{v.name}}</a>\n    </td>\n    <td class='type'>{{v.ext}}</td>\n    <td class='size'>{{v.size}}</td>\n    <td class='path'><a href='javascript:void(0);' title='{{LNG.goto}}{{v.path}}'>{{v.path}}</a></td>\n</tr>\n{{/each}}"),define("app/tpl/upload.html",[],"<div class='file_upload'>\n    <div class='top_nav'>\n       <a href='javascript:void(0);' class='menu this tab_upload'>{{LNG.upload_local}}</a>\n       <a href='javascript:void(0);' class='menu tab_download''>{{LNG.download_from_server}}</a>\n       <div style='clear:both'></div>\n    </div>\n    <div class='upload_box'>\n        <div class='btns'>\n            <div id='picker'>{{LNG.upload_select}}</div>\n            <div class=\"upload_box_tips\">\n            <a href=\"javascript:void(0);\" class=\"upload_box_clear\">{{LNG.upload_clear}}</a> \n            </div>\n            <div style='clear:both'></div>\n        </div>\n        <div id='uploader' class='wu-example'>\n            <div id='thelist' class='uploader-list'></div>\n        </div>\n    </div>\n    <div class='download_box hidden'>\n        <div class='list'>{{LNG.download_address}}<input type='text' name='url'/>\n\n        <div class=\"download_btn_group btn-group\">\n          <button class='btn btn-default btn-sm download_start' type='button'>{{LNG.download}}</button>\n          <button type=\"button\" class=\"btn btn-default btn-sm dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            <span class=\"caret\"></span>&nbsp;\n            <span class=\"sr-only\">Dropdown</span>\n          </button>\n          <ul class=\"dropdown-menu\">\n            <li><a href=\"javascript:void(0);\" class=\"download_start_all\">批量添加</a></li>\n          </ul>\n        </div>\n\n        </div>\n        <div style='clear:both'></div>\n        <div id='downloader'>\n            <div id='download_list' class='uploader-list'></div>\n        </div>\n    </div>\n</div>"),define("app/src/edit/edit",["./preview","./preview_markdown","./tpl/markdown_preview.html","./function_list","lib/ace/src-min-noconflict/ext-modelist","./tpl/edit_tab_content.html"],function(e){var t={},a=void 0,i=e("./preview");e("lib/ace/src-min-noconflict/ext-modelist"),aceModeList=ace.require("ace/ext/modelist"),e.async("lib/ace/src-min-noconflict/ext-language_tools",function(){ace.require("ace/ext/language_tools")}),e.async("lib/ace/emmet.min.js",function(){e.async("lib/ace/src-min-noconflict/ext-emmet",function(){ace.require("ace/ext/emmet")})});var n,o=function(e,a){if(void 0==a||void 0==e||1>t.length)return"";for(var i in t)if(t[i].kod[e]==a)return t[i].kod.uuid;return""},s=function(){var e={auto_complete:1,keyboard_type:"ace",theme:"tomorrow",font_size:"15px",font_family:"Consolas",tab_size:4,soft_tab:1,auto_wrap:1,display_char:0,function_list:1};for(var t in e)G.code_config[t]===void 0&&(G.code_config[t]=e[t]);auto_function_list=parseInt(G.code_config.function_list),Toolbar.toolbarSelected(),_(),$("body").bind("click",function(e){$(e.target).hasClass("markdown_menu_box")||0!=$(e.target).parents(".markdown_menu_box").length||$(".markdown_menu_box").addClass("hidden")})},r=function(e){var t=core.pathExt(e),a=aceModeList.getModeForPath(e).name;if("text"==a)for(var i in core.fileOpenMode)if(-1!=$.inArray(t,core.fileOpenMode[i])){a=i;break}return a},l=function(e){var a,i="id_"+UUID();if(void 0==e||""==e)return a={uuid:i,name:"newfile.txt",charset:"utf-8",filename:"",mode:r("test.txt"),the_url:""},c(a),p(a),$(".edit_body .this").removeClass("this"),$(".edit_body pre#"+i).parent().addClass("this"),$(".tab_"+a.uuid).removeClass("loading"),g(),u(),Toolbar.toolbarSelected(),void 0;var n="./index.php?editor/fileGet&filename="+e;G.share_page!==void 0&&(n="./index.php?share/fileGet&user="+G.user+"&sid="+G.sid+"&filename="+e),a={charset:"utf-8",uuid:i,name:core.pathThis(urlDecode(urlDecode(e))),filename:e,mode:r(urlDecode(e)),the_url:n},c(a,!0),t[a.uuid]={kod:{filename:a.filename}};
var o=art.dialog({id:"dialog_"+a.uuid,title:!1,content:LNG.getting+"",icon:"warning",parentAt:$(".edit_body pre#"+a.uuid).parent()});$.ajax({dataType:"json",url:n,error:function(e,t,i){L(a.uuid),core.ajaxError(e,t,i),o&&o.close()},success:function(e){if($(".tab_"+a.uuid).removeClass("loading"),o&&o.close(),0==$("#"+a.uuid).length)return L(a.uuid),void 0;if(!e.code)return Tips.tips(e),L(a.uuid),void 0;var n=e.data;1==n.base64&&(n.content=base64_decode(n.content));var s="<?php exit;?>";if("php"==n.ext&&0==n.content.indexOf(s)){var l=n.content.substr(s.length);n.content=s+js_beautify(l),a.mode=r("test.json")}"oexe"==n.ext&&(n.content=js_beautify(n.content)),t[i]=void 0,$("#"+i).text(n.content),p(a);var c=t[i];c.kod.charset=n.charset,c.kod.base64=n.base64,c.navigateTo(0),c.moveCursorTo(0,0),E(),g(),u(),Toolbar.toolbarSelected()}})},c=function(t,a){var i='<div class="edit_tab_menu tab loading tab_'+t.uuid+'" uuid="'+t.uuid+'" title="'+urlDecode(urlDecode(t.filename))+'">'+'   <div class="name">'+t.name+"</div>"+'   <a href="javascript:void(0);" class="close icon-remove" draggable="false"></a>'+'   <div style="clear:both;"></div>'+"</div>";$(i).insertBefore(".edit_tab .add");var n=e("./tpl/edit_tab_content.html"),o=template.compile(n),s=o({LNG:LNG,uuid:t.uuid});if($(".edit_body .tabs").append(s),f(t.uuid),a){var r=animate_time;animate_time=1,Tap.resetWidth("add"),animate_time=r}else Tap.resetWidth("add");_()},d=function(e){b(e,!0),clearTimeout(n),n=!1,n=setTimeout(function(){e.kod.preview.editChange()},300)},p=function(e){var a=ace.edit(e.uuid);a.setTheme("ace/theme/"+G.code_config.theme),void 0!=e.mode&&a.getSession().setMode("ace/mode/"+e.mode),a.getSession().setTabSize(G.code_config.tab_size),a.getSession().setUseSoftTabs(G.code_config.soft_tab),a.getSession().setUseWrapMode(G.code_config.auto_wrap),"ace"==G.code_config.keyboard_type?a.setKeyboardHandler():a.setKeyboardHandler("ace/keyboard/"+G.code_config.keyboard_type),a.$blockScrolling=1/0,a.setShowPrintMargin(!0),a.setPrintMarginColumn(120),a.setDragDelay(100),a.setShowInvisibles(G.code_config.display_char),a.setFontSize(G.code_config.font_size),a.setAnimatedScroll(!0),a.setOptions({enableEmmet:!0,enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:G.code_config.auto_complete}),a.on("change",function(){d(a)}),a.on("changeSelection",function(){P()}),a.commands.addCommand({name:"editSave",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor|cli"},exec:function(e){y(e.kod.uuid)}}),a.commands.addCommand({name:"editFunction",bindKey:{win:"Ctrl-Shift-E",mac:"Command-Shift-E",sender:"editor|cli"},exec:function(){Toolbar.doAction("function_list")}}),a.commands.addCommand({name:"preview",bindKey:{win:"Ctrl-Shift-S",mac:"Command-Shift-S"},exec:function(){Toolbar.doAction("preview")}}),a.commands.addCommand({name:"preview",bindKey:{win:"Ctrl-command-G",mac:"Ctrl-command-G"},exec:function(e){e.findAll(e.session.getTextRange()),P()}}),a.commands.addCommand({name:"refresh",bindKey:{win:"F5",mac:"F5"},exec:function(){Toolbar.doAction("refresh")}}),e.mode||(e.mode=""),a.kod={mode:e.mode,uuid:e.uuid,name:e.name,base64:!1,charset:"utf-8",the_url:e.the_url,filename:e.filename},a.hasChanged=!1,t[e.uuid]=a,a.kod.preview=new i(a)},u=function(){var e=S();if(e){e.focus(),e.resize();try{var t=window.parent.art.dialog.list.openEditor,a=urlDecode(urlDecode(Editor.current().kod.filename)),i='<img draggable="false" src="'+G.static_path+'images/file_icon/icon_others/edit.png"/>'+a;if(t){t.title(i);var n="./index.php?editor/edit#filename="+urlEncode2(a);window.parent.$(".openEditor .aui_content iframe").attr("src",n)}}catch(o){}}},h=function(e,t){try{Editor.current().completer.popup.hide()}catch(i){}$(".edit_tab .this").removeClass("this"),$(".edit_tab .tab_"+e).addClass("this"),a=e,t&&$(".edit_tab .this").stop(!0,!0).animate({opacity:.3},100).animate({opacity:.8},100).animate({opacity:.5},40).animate({opacity:1},40,function(){}),u(),P(),C(),g(),Toolbar.toolbarSelected()},f=function(e,t){void 0!=e&&""!=e&&($(".edit_body .this").removeClass("this"),$(".edit_body #"+e).parent().addClass("this"),h(e,t))},m=function(e,i,n){var o=t;$.extend(!0,{},G.code_config),void 0!=n&&(o={},o[n]?o[n]=t[n]:o[a]=t[a]);var s=function(e){var t=Number(!Number(e));return isNaN(t)?0:t};G.code_config[e]=i!==void 0?i:s(G.code_config[e]),Toolbar.toolbarSelected();for(var r in o){var l=o[r];if(l&&l.kod&&l.resize)switch(-1!=$.inArray(e,["font_size","auto_wrap","font_family"])&&d(l),e){case"theme":l.setTheme("ace/theme/"+i);break;case"tab_size":l.getSession().setTabSize(i);break;case"soft_tab":l.getSession().setUseSoftTabs(G.code_config[e]);break;case"font_size":l.setFontSize(i);break;case"auto_wrap":l.getSession().setUseWrapMode(G.code_config[e]);break;case"display_char":l.setShowInvisibles(G.code_config[e]);break;case"font_family":_();break;case"keyboard_type":"ace"==G.code_config.keyboard_type?l.setKeyboardHandler():l.setKeyboardHandler("ace/keyboard/"+G.code_config.keyboard_type);break;case"function_list":break;case"auto_complete":l.setOptions({enableLiveAutocompletion:G.code_config[e]}),l.$enableBasicAutocompletion=G.code_config[e];break;default:}}$.ajax({url:"./index.php?editor/setConfig&k="+e+"&v="+G.code_config[e],dataType:"json",success:function(){}})},_=function(){var e=G.code_config.font_family;e="'"+e+"',Consolas, 'Liberation Mono','Ubuntu Mono', Menlo, Courier, monospace",$(".ace_editor_content").css("font-family",e)},v=function(e){var a=t;for(var i in a){var n=a[i];if(n&&n.kod&&n.resize)switch(e){case"resize":n.resize();break;case"setting":n.commands.exec("showSettingsMenu",n);break;default:}}"resize"==e&&g()},g=function(){var e=S();if(e){var t=$("#"+e.kod.uuid).parent().find(".edit_right_frame"),a=0;t.hasClass("hidden")||(a=100*(t.width()/$(window).width())),$(".edit_body .bottom_toolbar").css("right",a+"%")}},b=function(e,t){t!=e.hasChanged&&(e.hasChanged=t,$(".edit_tab .tabs .tab_"+e.kod.uuid).toggleClass("edit_changed"))},y=function(e,i){if(void 0!=a){void 0==e&&(e=a),void 0==i&&(i=!1);var n=t[e];if(n.hasChanged){if(void 0==n||""==n)return tips(LNG.data_error,"warning"),void 0;S().focus();var o=n.kod.filename;""==o?core.path_select("file",LNG.newfile_save_as,function(e){x(n,e,i)}):x(n,o,i)}}},w=function(){for(var e in t)""!=t[e].kod.filename&&y(e)},x=function(e,t,a){var i={path:urlDecode(t),charset:e.kod.charset,filestr:e.getValue()},n="./index.php?editor/fileSave";G.share_page!==void 0&&(n="./index.php?share/fileSave&user="+G.user+"&sid="+G.sid+"&filename="+t),e.kod.base64&&(i.base64="1",i.filestr=base64_encode(i.filestr)),i.filestr=urlEncode(i.filestr),""==e.kod.filename&&(i.create_file=1);var o=art.dialog({title:!1,content:LNG.getting,icon:"warning",parentAt:$(".edit_body pre#"+e.kod.uuid).parent()});$(".tab_"+e.kod.uuid).addClass("loading"),$.ajax({type:"POST",dataType:"json",url:n,data:i,error:core.ajaxError,success:function(i){o&&o.close(),$(".tab_"+e.kod.uuid).removeClass("loading"),i.code&&(""==e.kod.filename&&(e.kod.filename=t,k(e)),b(e,!1),u(),a&&L(e.kod.uuid))}})},k=function(e){var t=e.kod.filename;e.kod.name=core.pathThis(t),e.kod.mode=r(t),e.kod.the_url="./index.php?editor/fileGet&filename="+t;var a=$(".tab_"+e.kod.uuid);a.attr("title",t),a.find(".name").html(e.kod.name)},N=function(e){if(void 0==e&&(e=a),void 0==t[e])return L(e),void 0;var i=t[e];i.hasChanged?$.dialog({title:LNG.warning,resize:!1,background:"#fff",opacity:.4,lock:!0,icon:"question",content:i.kod.name+"<br/>"+LNG.if_save_file,padding:40,button:[{name:LNG.button_save,focus:!0,callback:function(){y(e,!0)}},{name:LNG.button_not_save,callback:function(){L(e)}}]}):L(e)},L=function(e){delete t[e];var a="",i=$(".edit_tab .tab"),n=$(".edit_tab .tab_"+e),o=$(".edit_body pre#"+e).parent();n.hasClass("this")?($(i[0]).attr("uuid")==e?a=$(i[1]).attr("uuid"):i.each(function(){var t=$(this).attr("uuid");return t==e?!1:(a=t,void 0)}),""!=a&&$(".edit_body pre#"+a).addClass("this"),o.remove(),Tap.resetWidth("remove",n,a)):(o.remove(),Tap.resetWidth("remove",n)),C()},C=function(){0==$(".edit_body .tabs .edit_content").length?(S()&&S().kod.preview.close(),$(".disable_mask,.introduction").removeClass("hidden"),$(".bottom_toolbar").addClass("hidden"),$(".edit_body .tabs").addClass("hidden")):($(".disable_mask,.introduction").addClass("hidden"),$(".bottom_toolbar").removeClass("hidden"),$(".edit_body .tabs").removeClass("hidden"))},j=function(){for(var e in t)if(t[e].hasChanged)return!0;return!1},T=function(e){core.setSkin(e)},S=function(){return a&&t[a]&&t[a].focus?t[a]:!1},z=function(e){var a=Editor.current();e&&(a=t[e]);var i=a.kod.the_url,e=a.kod.uuid;if(""==i)return tips(LNG.not_exists,"warning"),void 0;var n=art.dialog({title:!1,content:LNG.getting,icon:"warning",parentAt:$(".edit_body pre#"+e).parent()});$(".tab_"+e).addClass("loading"),$.ajax({dataType:"json",url:i,error:function(t,a,i){n&&n.close(),$(".tab_"+e).removeClass("loading"),core.ajaxError(t,a,i)},success:function(t){if(n&&n.close(),$(".tab_"+e).removeClass("loading"),!t.code)return Tips.tips(t),void 0;var i=t.data;1==i.base64&&(i.content=base64_decode(i.content));var o="<?php exit;?>";if("php"==i.ext&&0==i.content.indexOf(o)){var s=i.content.substr(o.length);i.content=o+js_beautify(s)}"oexe"==i.ext&&(i.content=js_beautify(i.content)),a.kod.charset=i.charset,a.kod.base64=i.base64,a.getSession().setValue(i.content);var r=a.getFirstVisibleRow();a.scrollToLine(r),b(a,!1)}})},E=function(){ShareData.data("FILE_SEARCH_KEY")&&setTimeout(function(){var e=S();e.find(ShareData.data("FILE_SEARCH_KEY")),e.commands.exec("find",e),ShareData.remove("FILE_SEARCH_KEY")},100)},P=function(){var e=Editor.current();if(e){var t=e.selection.getCursor(),a=t.row+":"+t.column;e.selection.rangeCount>1&&(a+="  ["+e.selection.rangeCount+"]");for(var i=e.selection.getAllRanges(),n=0,o=0;i.length>o;o++){var s={start:i[o].start,end:i[o].end},r=e.selection.doc.getTextRange(s);n+=r.length}n>0&&(a+=" ("+n+" B)"),$(".editor_position").html(a)}};return{init:s,current:S,hasFileSave:j,set_config:m,do_action:v,setTheme:T,select:f,remove:N,save:y,saveall:w,refresh:z,cursor_change:P,getFileMode:r,aceModeList:aceModeList,add:function(e){var t=o("filename",e);""!=t?(f(t,!0),E()):l(e)}}}),define("app/src/edit/preview",["./preview_markdown","./tpl/markdown_preview.html","./function_list"],function(e){return function(t){var a=$("#"+t.kod.uuid).parent(".edit_content"),i=a.find(".edit_right_frame"),n=$("#"+t.kod.uuid),o=a.find(".function_list_frame"),s=a.find(".preview_url_frame"),r=a.find(".preview_markdown_frame"),l=e("./preview_markdown"),c=e("./function_list"),d=new l(t),p=new c(t),u=10,h=function(){a.find(".preview_url_tool input").keyEnter(k);var e=a.find(".resize"),t=0;e.drag({start:function(){t=i.width(),e.addClass("resize_active"),$("body").css("cursor","col-resize"),i.append('<div class="preview_frame mask_view"></div>'),i.addClass("can_not_select")},move:function(a){var o=t-a,s=$(window).width();o>=s-u&&(o=s-u),u>=o&&(o=u),n.width(s-o),i.width(o),e.css("left",s-o+"px")},end:function(){e.removeClass("resize_active"),$("body").css("cursor","default"),i.find(".mask_view").remove(),i.removeClass("can_not_select"),f()}})},f=function(){if(0==$(".markdown_full_page").length){if("block"==i.css("display")){var e=i.width(),t=$(window).width();e>=t-u&&(e=t-u),u>=e&&(e=u);var o=100*parseFloat(e/t);i.width(o+"%"),n.width(100-o+"%");var s=a.find(".resize");s.css("left",100-o+"%")}Editor.do_action("resize"),r.hasClass("hidden")||d.refreshScroll()}},m=function(){a.find(".edit_right_frame .box a,.function_list_tool .box a,.tools_markdown_more button").bind("click",function(e){var t=$(this).attr("class");switch($(this).attr("markdown_action")&&(t=$(this).attr("markdown_action")),t){case"tool_markdown_menu":if(a.find(".markdown_menu_box").toggleClass("hidden"),!a.find(".markdown_menu_box").hasClass("hidden")){var i=d.markdownMenu(a.find(".markdown_preview"));a.find(".markdown_menu_box .content").html(i)}stopPP(e);break;case"tool_markdown_download":d.markdownDownload(a.find(".markdown_preview").html());break;case"tool_markdown_max":a.toggleClass("markdown_full_page"),a.hasClass("markdown_full_page")||f();break;case"tool_open_url":g();break;case"tool_refresh":k();break;case"tool_close":x();break;case"tool_markdown_help":break;default:}})},_=function(e){var l=0;if(i.removeClass("hidden"),o.addClass("hidden"),r.addClass("hidden"),s.addClass("hidden"),a.find(".resize").removeClass("hidden"),"function_list"==e)o.removeClass("hidden"),l=200,p.refresh(),i.find(".function_search input").focus();else if("markdown"==e)l=.45*$(window).width(),r.removeClass("hidden"),d.refresh();else if("html"==e){l=.45*$(window).width(),s.removeClass("hidden");var c=urlDecode(urlDecode(t.kod.filename));c=core.path2url(c),i.find(".preview_url_tool input").val(c),i.find("iframe").attr("src",c)}i.css({width:l}),n.css({width:$(window).width()-l}),f()},v=function(){o.hasClass("hidden")?r.hasClass("hidden")||d.refresh():p.refresh()},g=function(e){if(r.hasClass("hidden"))window.open(a.find(".preview_url_frame input").attr("value"));else{var t=d.markdown2html(a.find(".markdown_preview").html()),i=window.open("","_blank","");i.document.open("text/html","replace"),i.opener=null,i.document.write(t),i.document.close()}stopPP(e)},b=function(){return p.support(t.kod.mode)?(o.hasClass("hidden")?(auto_function_list=1,_("function_list")):(auto_function_list=0,x()),Editor.set_config("function_list",auto_function_list),void 0):(tips(LNG.not_support,"warning"),void 0)},y=function(){i.hasClass("hidden")?w()||_("html"):r.hasClass("hidden")&&_("html")},w=function(){return auto_function_list&&p.support(t.kod.mode)?(_("function_list"),!0):"markdown"==t.kod.mode?(_("markdown"),!0):!1},x=function(){(s.hasClass("hidden")||!w())&&(i.addClass("hidden"),o.addClass("hidden"),r.addClass("hidden"),s.addClass("hidden"),a.find(".resize").addClass("hidden"),$(".markdown_full_page").removeClass("markdown_full_page"),n.css("width","100%"),Editor.do_action("resize"))},k=function(){var e=a.find(".preview_url_tool input"),t=e.attr("value");a.find(".open_ie").attr("href",t),a.find("iframe").attr("src",t)},G=function(){h(),m(),w()};return G(),{open:_,editChange:v,close:x,resize:f,openFunctionList:b,previewForce:y}}}),define("app/src/edit/preview_markdown",["./tpl/markdown_preview.html"],function(e){var t=function(e){var t="";return e.find("h1,h2,h3,h4,h5,h6").each(function(){var e="markdown-"+$(this).text().replace("/s*/g","-"),a="markdown_menu_"+$(this)[0].tagName.toLowerCase();$(this).attr("id",e),t+='<li class="'+a+'"><a href="#'+e+'">'+$(this).text()+"</a></li>"}),t="<div class='markdown_menu'><ul>"+t+"</ul></div>"},a=function(e){e.find("a").attr("target","_blank");var a="<p>[TOC]</p>";if(-1!=e.html().indexOf(a)){var i=e.html();i=i.replace(a,t(e)),e.html(i)}},i=function(t){e.async("lib/markdown/highlight.min",function(){t.find("pre code").each(function(e,t){$(this).removeAttr("class"),hljs.highlightBlock(t)})})},n=function(){var e="newfile",t=Editor.current().kod.filename;return""!=t&&(t=urlDecode(urlDecode(t)),t=core.pathThis(t),e=t.substr(0,t.indexOf("."))),e},o=function(t){var a=e("./tpl/markdown_preview.html"),i=template.compile(a);return i({content:t,title:n()})},s=function(e){var t=o(e),a=n()+".html";if(/Trident|MSIE/.test(navigator.userAgent)){var i=document.createElement("iframe");i.style.display="none",i.src=t,document.body.appendChild(i),i.contentWindow.document.execCommand("SaveAs",!1,a),document.body.removeChild(i)}else{var s=document.createElement("a"),r=new Blob([t]),l=document.createEvent("HTMLEvents");l.initEvent("click",!1,!1),s.download=a,void 0!=window.createObjectURL?s.href=window.createObjectURL(r):void 0!=window.URL?s.href=window.URL.createObjectURL(r):void 0!=window.webkitURL&&(s.href=window.webkitURL.createObjectURL(r)),s.dispatchEvent(l)}};return function(){var n,r,l,c,d=!1,p=!1,u=function(){if(n=Editor.current(),n&&void 0!==n.focus){var e=n.kod.uuid;r=$("#"+e).parent().find(".markdown_preview"),l=$("#"+e).parent().find(".edit_right_frame"),m(),f()}},h=function(t){e.async("lib/markdown/markdown-it.min",function(){if(r&&0!=r.length){var e=window.markdownit(),o=n.getValue();o=o.replace(/ \\\\/g," \\\\\\\\");var s=e.render(o);$("<div class='markdown_make_buffer hidden'></div>").appendTo("body");var l=$(".markdown_make_buffer");l.html(s),a(l),i(l),(0==r.html().length||t===!0)&&r.html(l.html()),r.html(l.html()),l.remove(),y()}})},f=function(){var e,t=function(){return!l.find(".preview_markdown_frame").hasClass("hidden")};n.session.on("changeScrollTop",function(){!p&&t()&&(d=!0,w(!0),clearTimeout(e),e=!1,e=setTimeout(function(){d=!1},1e3))}),n.on("change",function(){!p&&t()&&(d=!0,y(function(){w(!0),clearTimeout(e),e=!1,e=setTimeout(function(){d=!1},1e3)}))})},m=function(){var e;l.unbind("scroll").bind("scroll",function(){var t=l.parents(".edit_content");t.hasClass("markdown_full_page")||d||(p=!0,w(!1),clearTimeout(e),e=!1,e=setTimeout(function(){p=!1},1e3))})},_=[],v=[],g=function(){if(void 0!==n.kod.mode&&"markdown"==n.kod.mode){_=[];var e="\n...\n"+n.getValue(),t=0,a=0,i=/^ *```.*\n[\s\S]*?\n```|(^[ \t>-]*\#{1,6}[ \t]+)/gm;e.replace(i,function(e,i,o){if(i){var s=n.session.doc.indexToPosition(o),r=n.session.documentToScreenPosition(s.row,s.column),l=r.row*n.renderer.lineHeight;0==a&&(l+=20),a++,_.push({start:t,end:l,height:l-t,info:i}),t=l}return""})}},b=function(){if(l&&0!=l.length){v=[];var e=0,t=l.scrollTop();r.find("h1,h2,h3,h4,h5,h6").each(function(){var a=$(this).position().top+t+parseInt($(this).css("margin-top"));v.push({start:e,end:a,height:a-e,info:$(this).text()}),e=a})}},y=function(e){clearTimeout(c),c=!1,c=setTimeout(function(){g(),b(),"function"==typeof e&&e()},200)},w=function(e){var t=n.session.getScrollTop(),a=l.scrollTop(),i=function(e,t,a,i){for(var n,o=-1,s=0;e.length>s&&(o=s,n=e[s],!(e[s].end>t));s++);if(!(-1===o||o>=a.length)){var r=(t-n.start)/n.height,l=a[o],c=l.start+l.height*r;o==e.length-1&&t>=n.end-5&&(c=l.end),i(c)}};e?i(_,t,v,function(e){l.stop(!0).animate({scrollTop:e},100,"linear")}):a+l.height()>=l.prop("scrollHeight")-5?n.gotoLine(n.session.getLength()):i(v,a,_,function(e){n.session.setScrollTop(e)})};return u(),{refresh:h,refreshScroll:y,markdownMenu:t,markdown2html:o,markdownDownload:s}}}),define("app/src/edit/tpl/markdown_preview.html",[],'<!doctype html><html>\n<head><meta charset="utf-8">\n	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">\n	<head><title>{{title}}</title>\n</head>\n\n<style type="text/css">\n	html{font-family: Verdana,"Lantinghei SC","Hiragino Sans GB","Microsoft Yahei",Helvetica,arial,sans-serif;\n    text-align:justify;margin:auto;font-size:13px;line-height:1.6em;color:#555;background:#fefefe;}\n	body{padding:15px;margin:30px auto;}\n	\n	article,footer,header,nav{width:700px;margin:0 auto}\n    article{margin-top:4em;margin-bottom:4em;min-height:400px}\n    footer{margin-bottom:50px}\n    video{margin:2em 0;border:1px solid #ddd}\n    nav{font-size:.9em;font-style:italic;border-bottom:1px solid #ddd;padding:1em 0}\n    nav p{margin:0}\n    .h1,h1{font-size:2.6em;}\n    .h2,h2{font-size:2.2em;}\n    .h3,h3{font-size:1.8em;}\n    .h4,h4{font-size:1.6em;}\n    .h5,h5{font-size:1.4em;}\n    .h6,h6{font-size:1.2em;}\n    .h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{\n        font-family:inherit;font-weight:600;color:#444;\n        line-height:1.5em;\n        margin:0.6em 0;\n    }\n    p{-webkit-hypens:auto;-moz-hypens:auto;hyphens:auto;margin:0.1em;}\n    blockquote{margin-left:1em;padding:10px 20px;margin: 0 0 20px;border-left:10px solid #eee;background: #f6f6f6;}\n    code{font-family:Consolas,Menlo,Monaco,monospace,serif;padding: 2px 4px;color: #c7254e;background-color:#f9f2f4;border-radius: 4px;}\n    pre{display:block;padding:0;overflow:auto;margin:0 0 10px;font-size:14px;line-height:1.42857143;\n        word-break:break-all;word-wrap:break-word;color:#333;background:none;border-radius:4px}\n    code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}\n    pre code{background:#f8f8f8;color:#666;white-space:pre-wrap;padding:6px 1em;border:1px solid #eee;display: block;}\n    a{color:#1980e6;text-decoration:none}\n    a:hover{text-decoration:underline}\n    a img{border:none}\n    h1 a,h1 a:hover{color:#333;text-decoration:none}\n    hr{color:#ddd;height:1px;margin:2em 0;border-top:solid 1px #ddd;border-bottom:none;border-left:0;border-right:0}\n    @media screen and (min-width: 900px) {\n        body {width: 900px;}\n    }\n    table {border-collapse: collapse;border-spacing: 0;margin-bottom: 20px;}\n    table td,table th{padding: .5em;border: 1px solid #ddd;line-height: 1.5;}\n    table th{color:#444;}\n    .markdown_menu ul{padding:0 10px 20px 20px;}\n    .markdown_menu li{\n        font-size:14px;list-style:none;\n        line-height:1.8em;overflow: hidden;text-overflow: ellipsis;white-space: nowrap; \n    }\n    .markdown_menu_h2{padding-left:2em;}\n    .markdown_menu_h3{padding-left:4em;}\n    .markdown_menu_h4{padding-left:6em;}\n    .markdown_menu_h5{padding-left:8em;}\n    .markdown_menu_h6{padding-left:10em;}\n\n    .MJX_Assistive_MathML_Block{display:none;}\n    .MathJax{font-size:18px;color:#222;}\n    .MathJax span{outline:none !important;}\n    .MathJax:focus{outline:none !important;display: inline-block;}\n\n    .hljs-comment,.hljs-quote {color: #8e908c;}\n    .hljs-variable,.hljs-template-variable,.hljs-tag,.hljs-name,.hljs-selector-id,\n    .hljs-selector-class,.hljs-regexp,.hljs-deletion {color: #c82829;}\n    .hljs-number,.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-type,\n    .hljs-params,.hljs-meta,.hljs-link {color: #f5871f;}\n    .hljs-attribute {color: #eab700;}\n    .hljs-string,.hljs-symbol,.hljs-bullet,.hljs-addition {color: #718c00;}\n    .hljs-title,.hljs-section {color: #4271ae;}\n    .hljs-keyword,.hljs-selector-tag {color: #8959a8;}\n    .hljs {display: block;overflow-x: auto;color: #4d4d4c;padding: 0.5em;}\n    .hljs-emphasis {font-style: italic;}\n    .hljs-strong {font-weight: bold;}\n</style>\n<body>\n{{#content}}\n</body>\n<html>\n\n'),define("app/src/edit/function_list",[],function(){var e={php:[{reg:/\n.*?\s*function\s*([_\w]+)\s*\(.*\)*/g,reg_name:/.*function\s*(.*\))/,reg_index:1,type_extents:{function_value:/\s*(private|protected)\s*/,function_var:/\s*(public)\s*/},type:"function"},{reg:/\s*class\s+(\w*)\s*.*\{/g,reg_name:/\s*class\s+(\w*)\s*.*\{/,reg_index:1,type:"class"}],javascript:[{reg:/\s*([\w\.]+)\s*=\s*function\s*\([\w,\s\*\[\]\<\>&$]*\)\s*\{/g,reg_name:/\s*([\w\.]+)\s*=\s*function\s*(.*)/,reg_index:1,reg_name_all:[1,2],type:"function function_var"},{reg:/\s*function\s+([\w\s]+)\s*\([\w,\s\*\[\]\<\>&$]*\)\s*\{/g,reg_name:/\s*function\s+([\w\s]+)\s*(.*)/,reg_index:1,reg_name_all:[1,2],type:"function function_define"},{reg:/\s*([\w\.]+)\s*:\s*function\s*\([\w,\s\*\[\]\<\>&$]*\)\s*\{/g,reg_name:/\s*([\w\.]+)\s*:\s*function\s*(\([\w,\s\*\[\]\<\>&$]*\))/,reg_index:1,reg_name_all:[1,2],type:"function function_value"}],python:[{reg:/\s*class\s+(\w+)\s*\(/g,reg_name:/\s*class\s+(\w+)\s*\(/,reg_index:1,type:"class"},{reg:/\s*def\s+(\w+)\s*\(.*\)/g,reg_name:/\s*def\s+(\w+)\s*\(.*\)/,reg_index:1,type:"function"}],ruby:[{reg:/\s*class\s+(\w+)\s*/g,reg_name:/\s*class\s+(\w+)\s*/,reg_index:1,type:"class"},{reg:/\s*def\s+(\w+)\s*/g,reg_name:/\s*def\s+(\w+)\s*/,reg_index:1,type:"function"}],golang:[{reg:/\s*class\s+(\w+)\s*/g,reg_name:/\s*class\s+(\w+)\s*/,reg_index:1,type:"class"},{reg:/\s*func\s+(\w+)\s*.*\{/g,reg_name:/\s*func\s+(\w+)\s*/,reg_index:1,type:"function"}],java:[{reg:/\s*(final)?\s*(public|private|protected)\s*.*\s+(\w+)\s*\(.*\).*\{/g,reg_name:/\s*(final)?\s*(public|private|protected)\s*.*\s+(\w+)\s*\(.*\).*\{/,reg_index:3,type:"function"},{reg:/\s*class\s+(\w+)\s*/g,reg_name:/\s*class\s+(\w+)\s*/,reg_index:1,type:"class"}],csharp:[{reg:/\s*(public|private|protected)\s*.*\s+(\w+)\s*\(.*\).*/g,reg_name:/\s*(public|private|protected)\s*.*\s+(\w+)\s*\(.*\).*/,reg_index:2,type:"function"},{reg:/\s*class\s+(\w+)\s*/g,reg_name:/\s*class\s+(\w+)\s*/,reg_index:1,type:"class"}],actionscript:[{reg:/\s*function\s*(\w+)\s*\(.*\).*\s*\{/g,reg_name:/\s*function\s*(\w+)\s*\(.*\).*\s*\{/,reg_index:1,type:"function"},{reg:/\s*class\s+(\w+)\s*.*\{/g,reg_name:/\s*class\s+(\w+)\s*.*\{/,reg_index:1,type:"class"}],objectivec:[{reg:/[\+-]\s*\(.*\)\s*(\w+)\s*\:\s*\(.*/g,reg_name:/[\+-]\s*\(.*\)\s*(\w+)\s*\:\s*\(.*/,reg_index:1,type:"function"},{reg:/[\+-]\s*\([^:\{\}]*\)\s*(\w*)\s*\{/g,reg_name:/[\+-]\s*\([^:\{\}]*\)\s*(\w*)\s*\{/,reg_index:1,type:"function"},{reg:/@implementation\s+(\w*)/g,reg_name:/@implementation\s+(\w*)/,reg_index:1,type:"class"},{reg:/#pragma\s+(mark\s+)?(.*)/g,reg_name:/#pragma\s+(mark\s+)?(.*)/,reg_index:2,type:"mark"}],c_cpp:[{reg:/([\w*]+\s+)+\*?(\w+)\s*\([\w,\s\*\[\]\<\>&]*\)\s*\{/g,reg_name:/(\w+\s*)+\s\*?(\w+)\s*\(/,reg_index:2,type:"function"},{reg:/\s*(\w+)::~?(\w+)\s*\([\w,\s\*\[\]\<\>&]*\)\s*\{/g,reg_name:/\s*(\w+)::~?(\w+)\s*\(/,reg_index:2,type:"function function_define"},{reg:/\s*class\s+(\w+)\s*:/g,reg_name:/\s*class\s+(\w+)\s*:/,reg_index:1,type:"class"}]},t=function(e,t){var a=e.match(t.reg);if(a){for(var i=[],n=a.length,o=0,s=e,r=0;n>r;r++){var l={};l.the_match=a[r];var c=l.the_match.match(t.reg_name);if(c&&!(2>c.length)&&c[t.reg_index]){l.name=c[t.reg_index];var d=s.indexOf(l.the_match),p=l.the_match.indexOf(l.name);if(l.pos_start=o+d+p,l.pos_end=l.pos_start+l.name.length,t.reg_name_all!==void 0){l.name="";for(var u=t.reg_name_all,h=0;u.length>h;h++)l.name+=c[u[h]]}o=o+d+l.the_match.length,s=e.substr(o),l.type=t.type,t.type_extents!==void 0&&$.each(t.type_extents,function(e,t){l.the_match.match(t)&&(l.type+=" "+e)}),i.push(l)}}return i}},a=function(a,i){if(void 0!==e[i]){for(var n=e[i],o=[],s=0;n.length>s;s++){var r=t(a,n[s]);r&&Array.prototype.push.apply(o,r)}o.sort(function(e,t){var a="pos_start";return e[a]<t[a]?-1:e[a]>=t[a]?1:void 0});for(var l=a.split("\n"),c=l.length,d=0,p=o[d],u=0,h=0;c>h&&p;h++){for(;p&&p.pos_start>=u&&p.pos_start<=u+l[h].length;)o[d].range={start:{row:h,column:p.pos_start-u},end:{row:h,column:p.pos_end-u}},d++,p=o[d];u=u+l[h].length+1}return o}},i=function(e){return e=e.replace(/[\r\n {]+/gi," "),e=e.replace(/"/gi,"'"),e=e.replace(/\</gi,"&lt;"),e=e.replace(/\>/gi,"&gt;")};return function(t){var n="",o='<div class="cell_null">No outline for the active view</div>',s=$("#"+t.kod.uuid).parent(),r=s.find(".function_search input"),l=s.find(".function_list_box"),c=function(){var e=Editor.current();if(!e||e.kod===void 0)return l.html(o),void 0;var t=function(e){var t=e.replace(/(^\s*)|(\s*$)/g,"");return t.replace(/(\{$)/,"")},s=e.kod.mode,c=a(e.getValue(),s);if(c===void 0||0==c.length)return l.html(o),void 0;var p=e.getCursorPosition().row;n="";for(var h=0;c.length>h;h++){var f=c[h],m=f.range;if(m){c.length-1>h&&p>=c[h].range.start.row&&c[h+1].range&&c[h+1].range.start.row>p&&(f.type+=" row_select"),h==c.length-1&&p>=c[h].range.start.row&&(f.type+=" row_select");var _=m.start.row+","+m.start.column+","+m.end.row+","+m.end.column,v=t(t(f.the_match)).substr(0,150);n+='<div class="list_row '+i(f.type)+' " title="'+i(v)+'" data-range="'+_+'">'+'<span class="icon"></span>'+'<span class="cell">'+i(f.name)+"</span></div>"}}r.val()||d(r.val()),u()},d=function(e){if(""==n)return l.html(o),void 0;if(""==e)return l.html(n),u(),void 0;var t=$("<div>"+n+"</div>");t.find(".cell").each(function(){var t=$(this).text(),a=t.toLowerCase().indexOf(e.toLowerCase());-1!=a?(t=t.substr(0,a)+"<b>"+t.substr(a,e.length)+"</b>"+t.substr(a+e.length),$(this).html(t)):$(this).parent().remove()}),l.html(t.html()),p($(l.find(".list_row").get(0)))},p=function(e){if(1==e.length){l.find(".list_row").removeClass("row_select"),e.addClass("row_select");var t=e.attr("data-range"),a=t.split(","),i={start:{row:parseInt(a[0]),column:parseInt(a[1])},end:{row:parseInt(a[2]),column:parseInt(a[3])}};Editor.current()&&(Editor.current().revealRange(i),r.textFocus())}},u=function(){var e=l;if(e.outerHeight()!=e.prop("scrollHeight")){var t=e.scrollTop(),a=t+e.height(),i=e.find(".row_select").index(),n=e.find(".list_row:eq(0)").outerHeight(),o=e.scrollTop();t>i*n?o=i*n:(i+1)*n>a&&(o=i*n-e.height()+n),e.scrollTop(o)}},h=function(){var e="mouse_is_down";l.delegate(".list_row","mouseover mousedown mouseout mouseup",function(){var t=$(this);switch(event.type){case"mouseover":t.parent().hasClass(e)?p(t):t.addClass("row_hover");break;case"mousedown":p(t),t.parent().addClass(e);break;case"mouseout":t.removeClass("row_hover");break;case"mouseup":t.parent().removeClass(e);break;default:}}),l.bind("mouseup",function(){r.textFocus()}),l.bind("mousedown",function(t){return 1!=t.which?!0:(l.setCapture&&l.setCapture(),$(document).one("mouseup",function(){l.removeClass(e),l.releaseCapture&&l.releaseCapture()}),void 0)});var t=function(){var e=r.val();d(e),""==e?s.find(".search_reset").addClass("hidden"):s.find(".search_reset").removeClass("hidden")};r.unbind("keydown").bind("keydown",function(e){switch(e.keyCode){case 37:break;case 39:break;case 38:0!=s.find(".row_select").prev().length&&(p(s.find(".row_select").prev()),u()),stopPP(e);break;case 40:0!=s.find(".row_select").next().length&&(p(s.find(".row_select").next()),u()),stopPP(e);break;case 27:case 13:p(s.find(".row_select")),r.val(""),t(),Editor.current()&&Editor.current().focus(),stopPP(e);break;default:setTimeout(t,5)}}),s.find(".search_reset").unbind("click").bind("click",function(){r.val(""),t(),Editor.current()&&Editor.current().focus()})};return h(),{refresh:c,support:function(t){return-1==$.inArray(t,objectKeys(e))?!1:!0}}}}),define("app/src/edit/tpl/edit_tab_content.html",[],'<div class="edit_content">\n	<pre id="{{uuid}}" class="ace_editor_content"></pre>\n	<div class="resize hidden"></div><!-- 预览 -->\n	<div class="edit_right_frame hidden">\n		<div class="right_main">\n			<div class="function_list_frame hidden">\n				<div class="function_list_tool">\n					<div class="box">\n						<span> <i class="icon-code"></i>{{LNG.function_list}}</span>\n						<a href="javascript:;" class="tool_close" title="{{LNG.close}}"><i class="font-icon icon-remove"></i></a>\n					</div>\n					<div class="function_search">\n						<input type="text" placeholder="Search(ctrl+shift+e)">\n						<i class="font-icon icon-remove-sign search_reset hidden"> </i>\n					</div>\n				</div>\n				<div class="function_list_parent">\n					<div class="function_list_box"></div>\n				</div>\n			</div>\n			<!-- 函数列表 -->\n\n			<div class="preview_url_frame can_right_menu hidden">\n				<div class="preview_url_tool">\n					<div class="input_content"><input type="text" value=""/></div>\n					<div class="box">\n						<a href="javascript:;" class="tool_open_url" title="{{LNG.open_ie}}"><i class="font-icon icon-external-link"></i></a>\n						<a href="javascript:;" class="tool_refresh" title="{{LNG.refresh}}"><i class="font-icon icon-refresh"></i></a>\n						<a href="javascript:;" class="tool_close" title="{{LNG.close}}"><i class="font-icon icon-eye-close"></i></a>\n					</div>\n				</div>\n				<div class="preview_frame_content">\n					<iframe src="" style="width:100%;height:98%;border:0;"></iframe>\n				</div>\n			</div>\n			<!-- url浏览 -->\n\n			<div class="preview_markdown_frame can_right_menu hidden">\n				<div class="preview_markdown_tool">\n					<div class="box">\n						<a href="javascript:;" class="tool_markdown_menu" title="{{LNG.download}}"><i class="font-icon icon-list"></i></a>\n						<a href="javascript:;" class="tool_markdown_help" title="{{LNG.help}}"><i class="font-icon icon-question"></i></a>\n						<a href="javascript:;" class="tool_markdown_max" title="{{LNG.open_ie}}"><i class="font-icon icon-resize-full"></i></a>\n						<a href="javascript:;" class="tool_close" title="{{LNG.close}}"><i class="font-icon icon-eye-close"></i></a>\n					</div>\n					<div class="markdown_menu_box hidden">\n						<h3>{{LNG.markdown_content}}</h3>\n						<!-- 下载、帮助 字数信息，导出pdf、预览-->\n						<div class="btn-group btn-group-sm tools_markdown_more">\n						  	<button type="button" markdown_action="tool_open_url" class="btn btn-default">\n								<i class="font-icon icon-cloud-download"></i>{{LNG.preview}}\n						  	</button>\n							<button type="button" markdown_action="tool_markdown_download" class="btn btn-default">\n								<i class="font-icon icon-cloud-download"></i>{{LNG.download}}\n							</button>\n						</div>\n						<div class="content"></div>\n					</div>\n				</div>\n				<div class="markdown_preview can_select"></div>\n			</div>\n			<!-- markdown -->\n		</div>\n	</div>\n</div>\n\n'),define("app/src/edit/taskTap",[],function(){var e=function(){$(".edit_tab .tab").live("mouseenter",function(){$(this).addClass("hover"),$(this).unbind("mousedown").mousedown(function(e){1!=e.which||$(this).hasClass("this")||$.nodeName(e.target,"A")||($(this).removeClass("hover").addClass("this"),Editor.select($(this).attr("uuid")))
}).unbind("mouseup").mouseup(function(e){2==e.which&&Editor.remove($(this).attr("uuid"))})}).die("mouseleave").live("mouseleave",function(){$(this).removeClass("hover")}).die("dblclick").live("dblclick",function(e){stopPP(e)}),$(".edit_tab").die("dblclick").live("dblclick",function(e){Editor.add(),stopPP(e)}),$(".edit_tab .tab .close").live("click",function(){var e=$(this).parent().attr("uuid");Editor.remove(e)})},t=function(){$(".context-menu-list").filter(":visible").trigger("contextmenu:hide")},a=function(){$("body").click(t).contextmenu(t),$.contextMenu({zIndex:9999,selector:".edit_tab_menu",items:{refresh:{name:LNG.refresh+"<b>F5</b>",className:"refresh",icon:"refresh",accesskey:"e"},close:{name:LNG.close,icon:"remove",accesskey:"d"},close_right:{name:LNG.close_right,icon:"remove-sign",accesskey:"r"},close_others:{name:LNG.close_others,icon:"remove-circle",accesskey:"o"},sep1:"--------",open_the_path:{name:LNG.open_the_path,icon:"plus",accesskey:"n"},preview:{name:LNG.preview,icon:"globe",accesskey:"p"}},callback:function(e,t){var a=t.$trigger,i=a.attr("uuid");switch(e){case"refresh":Editor.refresh(i);break;case"close":Editor.remove(i);break;case"close_right":var n=$(".edit_tab .tabs .tab").index(a);$(".edit_tab .tabs .tab:gt("+n+")").each(function(){Editor.remove($(this).attr("uuid"))});break;case"close_others":$(".edit_tab .tabs .tab").each(function(){var e=$(this).attr("uuid");e!=i&&Editor.remove(e)});break;case"open_the_path":var o=a.attr("title");if(""==o)return tips(LNG.not_exists,"warning"),void 0;var s=core.pathFather(o),r=ShareData.frameTop();r.core.open_path(s);break;case"preview":Toolbar.doAction("preview");break;default:}}})},i=function(){var e,t,a,i,n=!1,o=!1,s=0,r=0,l=0,c=0,d=0,p=0,u=0,h=0;$(".edit_tab .tab").die("mousedown").live("mousedown",function(t){$.nodeName(t.target,"A")||(e=$.nodeName(t.target,"SPAN")?$(t.target).parent():$(this),1==t.which&&(n=!0,this.setCapture&&this.setCapture(),$(document).mousemove(function(e){m(e)}),$(document).one("mouseup",function(e){v(e),this.releaseCapture&&this.releaseCapture()})))});var f=function(i){o=!0,s=i.pageX,l=i.pageY,$tab_parent=$(".edit_tab"),t=$(".edit_tab .tab"),$(".draggable-dragging").remove(),a=e.clone().addClass("draggable-dragging").prependTo("body"),p=$sizeInt(t.css("margin-right")),u=$tab_parent.width(),h=$tab_parent.get(0).getBoundingClientRect().left,h+=$(window).scrollLeft(),r=e.get(0).getBoundingClientRect().left,d=$sizeInt(t.css("width")),c=$sizeInt(t.css("height"));var n=e.get(0).getBoundingClientRect().top-$sizeInt(e.css("margin-top")),f=i.clientX-s+r;$("body").prepend("<div class='dragMaskView'></div>"),a.css({width:d+"px",top:n,left:f}),e.css("opacity",0)},m=function(i){if(n){0==o&&f(i);var u=i.clientX-s+r,h=i.clientY-l+c;a.css({left:u,top:h}),t.each(function(){var t=$(this).get(0).getBoundingClientRect().left;if(u>t&&t+d/2+p>u){if(e.attr("uuid")==$(this).attr("uuid"))return;_($(this).attr("uuid"),"left")}if(u>t-d/2+p&&t>u){if(e.attr("uuid")==$(this).attr("uuid"))return;_($(this).attr("uuid"),"right")}})}},_=function(a,n){if(!e.is(":animated")||i!=a){i=a,e.stop(!0,!0),$(".insertTemp").remove(),t=$(".edit_tab .tab");var o=e.width(),s=$(".edit_tab .tab_"+a),r=e.clone(!0).insertAfter(e).css({"margin-right":"0px",border:"none"}).addClass("insertTemp");"left"==n?e.after(s).css("width","0px"):(e.before(s).css("width","0px"),s.before(r)),e.animate({width:o+"px"},animate_time),r.animate({width:"0px"},animate_time,function(){$(this).remove(),t=$(".edit_tab .tab")})}},v=function(){if(n=!1,o=!1,startTime=0,$(".dragMaskView").remove(),Editor.current()&&Editor.current().focus(),void 0!=a){var t=e.get(0).getBoundingClientRect().left,i=e.get(0).getBoundingClientRect().top;a.animate({left:t+"px",top:i+"px"},animate_time,function(){e.css("opacity",1),$(this).remove()})}}},n=function(e,t,a){var i=1.4*animate_time,n=122,o=n,s=$(".edit_tab .tab"),r=$sizeInt($(".edit_tab .tabs").width())-4,l=$sizeInt(s.css("margin-right"))+$sizeInt(s.css("border-right")),c=$sizeInt($(".edit_tab .add").css("width"))+2*l,d=s.length,p=Math.floor((r-c)/(n+l));switch(d>p&&(o=Math.floor((r-c)/d)-l),e){case"add":$(".edit_tab .tabs .this").css({"margin-top":"30px",width:o}).animate({"margin-top":"0px"},i,function(){s.animate({width:o+"px"},i)});break;case"remove":void 0!=a&&Editor.select(a),t.stop(1,1).animate({width:"0","margin-top":"+=30"},i,function(){s.stop(1,1).animate({width:o+"px"},i),t.remove()});break;case"resize":s.css("width",o+"px");break;default:}};return{rightMenu:{hidden:t},resetWidth:n,init:function(){e(),i(),a()}}}),define("app/src/edit/toolbar",[],function(){var e=function(){a(),$(".toolMenu").bind("click mouseup",stopPP),$(".toolMenu").on("mousedown",function(){$(".toolMenu").removeClass("select"),$(this).addClass("select"),$(this).contextMenu({action:e})});var e=function(e,t){if(t.parent().hasClass("top_toolbar"))e.css({left:t.offset().left-4,top:t.outerHeight()-1});else if(t.parent().hasClass("bottom_toolbar")){var a=t.offset().left-e.outerWidth()+t.outerWidth()-5;e.css({left:a,top:t.offset().top-e.outerHeight()})}e.find("input").length>=1&&setTimeout(function(){e.find("input").focus()},10)};$.contextMenu({selector:".menuViewGotoline",trigger:"none",callback:n,items:{gotoline:{name:LNG.goto,className:"disable gotoline_input",type:"text"}}}),$.contextMenu({selector:".menuViewTab",trigger:"none",callback:n,items:{soft_tab:{name:"Soft Tabs (spaces)",className:"soft_tab"},sep1:"---------",tab_size_2:{name:"Tab with:2",className:"tab_size_set tab_size_2"},tab_size_3:{name:"Tab with:3",className:"tab_size_set tab_size_3"},tab_size_4:{name:"Tab with:4",className:"tab_size_set tab_size_4"},tab_size_8:{name:"Tab with:8",className:"tab_size_set tab_size_8"}}});for(var t=["Consolas","Courier","Courier New","DejaVu Sans Mono","Liberation Mono","Menlo","Monaco","Monospace","Source Code Pro"],i={},s=0;t.length>s;s++){var r=t[s],l=replaceAll(r," ","_");i["set_font_family_"+r]={name:r,className:"set_font_family_"+l}}$.contextMenu({selector:".menuViewSetting",trigger:"none",callback:n,items:{function_list:{name:LNG.function_list+"<b>Ctrl+Shift+E</b>",className:"function_list"},auto_complete:{name:LNG.auto_complete,className:"auto_complete"},sep1:"---------",auto_wrap:{name:LNG.wordwrap,className:"auto_wrap"},display_char:{name:LNG.char_all_display,className:"display_char"},sep2:"---------",font_family:{name:LNG.font_family,icon:"italic",className:"code_font_family_list",accesskey:"m",items:i},ace_mode:{name:LNG.keyboard_type,icon:"code",accesskey:"m",items:{keyboard_type_ace:{name:"Default",className:"keyboard_type_ace"},keyboard_type_vim:{name:"vim",className:"keyboard_type_vim"},keyboard_type_emacs:{name:"emacs",className:"keyboard_type_emacs"}}},sep3:"---------",others:{name:LNG.tools,icon:"ellipsis-horizontal",accesskey:"m",items:{preview:{name:LNG.preview+"<b>Ctrl+Shift+S</b>",icon:"edit"},open_ie:{name:LNG.open_ie,icon:"external-link",accesskey:"b"},beautify_html:{name:LNG.beautify_html,className:"line_top",icon:"angle-right"},beautify_css:{name:LNG.beautify_css,icon:"angle-right"},beautify_js:{name:LNG.beautify_js,icon:"angle-right"}}},about:{name:LNG.about,icon:"info-sign"}}}),$(".tools a[action]").bind("click",function(){var e=$(this).attr("action");n(e),Editor.current()&&Editor.current().focus()}),$(".tab_size_set").click(function(){var e=$(this).text().split(":");Editor.set_config("tab_size",e[1]),Editor.current()&&Editor.current().focus()}),$("ul.code_font_family_list .context-menu-item").click(function(){Editor.set_config("font_family",$(this).find("span").html(),""),Editor.current()&&Editor.current().focus(),o()}),$("body").click(function(e){try{$(".toolMenu").removeClass("select"),window.parent.rightMenu.hidden(),e&&$(e.target).is("textarea")||$(e.target).is("input")||0!=$(e.target).parents(".right_main").length||Editor.current()&&Editor.current().focus()}catch(e){}}),$(".tools a,.preview_tool a").tooltip({placement:"bottom"}),$(".gotoline_input input").keyup(function(){Editor.current().gotoLine($(this).val())})},t=function(){var e=Editor.aceModeList.modes,t='<ul class="dropdown-menu code_mode_list hidden">';t+='<li class="list_input"><input type="text" value="" name="menu_mode_input" /></li>';for(var a=0;e.length>a;a++)t+='<li class="list_cell" mode_name="'+e[a].name+'">'+e[a].caption+"</li>";$(t+"<ul>").appendTo("body");var i=function(){$(".file_mode").removeClass("select"),$(".code_mode_list").addClass("hidden"),$(".code_mode_list input").val(""),$(".code_mode_list .list_cell").removeClass("hidden").removeClass("hover");var e=$(".code_mode_list .selected").attr("mode_name");Editor.current().getSession().setMode("ace/mode/"+e),Editor.current().kod.mode=e,Editor.current()&&Editor.current().focus(),o()};$(".file_mode").mousedown(function(){$(".file_mode").addClass("select"),$(".code_mode_list").removeClass("hidden");var e=$(window).width()-$(".file_mode").offset().left-$(".file_mode").outerWidth();$(".code_mode_list").css("right",e)}).mouseup(function(){$(".code_mode_list input").textFocus(),setTimeout(function(){$(".code_mode_list input").focus()},10)}),$("body").mousedown(function(e){!$(".file_mode").hasClass("select")||0!=$(e.target).parents(".code_mode_list").length||$(e.target).hasClass("file_mode")||$(e.target).hasClass("code_mode_list")||i()}),$(".code_mode_list input").keyup(function(e){var t=$(".code_mode_list .list_cell:not(.hidden)"),a=t.index($(".code_mode_list .hover"));switch(e.keyCode){case 38:if(a>0){$(".code_mode_list .hover").removeClass("hover");var n=$(t.get(a-1)).addClass("hover");1==n.length&&Editor.current().getSession().setMode("ace/mode/"+n.attr("mode_name"))}return stopPP(e),void 0;case 40:if(t.index(".hover")<t.length-1){$(".code_mode_list .hover").removeClass("hover");var n=$(t.get(a+1)).addClass("hover");1==n.length&&Editor.current().getSession().setMode("ace/mode/"+n.attr("mode_name"))}return stopPP(e),void 0;case 27:return i(),void 0;case 13:return $(".code_mode_list .selected").removeClass("selected"),$(".code_mode_list .hover").addClass("selected"),i(),void 0;default:}var o=$(this).val().toLocaleLowerCase(),s="hidden",r="";$(".code_mode_list .list_cell").each(function(){var e=$(this).removeClass("hover").html().toLocaleLowerCase();-1!=e.indexOf(o)?(""==r&&(r=$(this).addClass("hover"),Editor.current().getSession().setMode("ace/mode/"+$(this).attr("mode_name"))),$(this).removeClass(s)):$(this).addClass(s)})}),$(".code_mode_list .list_cell").mouseenter(function(){$(".code_mode_list .hover").removeClass("hover"),$(this).addClass("hover"),Editor.current().getSession().setMode("ace/mode/"+$(this).attr("mode_name")),$(this).unbind("click").click(function(){$(this).parent().find(".list_cell").removeClass("selected"),$(this).addClass("selected"),i()})}).mouseleave(function(){$(this).removeClass("hover"),Editor.current().getSession().setMode("ace/mode/"+Editor.current().kod.mode)})},a=function(){t(),$(".top_boolbar a").attr("draggable","false"),$(".bottom_toolbar a").attr("draggable","false");for(var e=[12,13,14,15,16,18,20,22,24,26,28,32],a=G.code_theme_all.split(","),i={},o={},s=0;e.length>s;s++){var r=e[s];i["set_code_font-"+r]={name:r+"px",className:"set_code_font_"+r}}for(var s=0;a.length>s;s++){var l=a[s],c={name:l,className:"set_code_theme_"+l};"ambiance"==l&&(c.className+=" line_top"),o["set_code_theme-"+l]=c}$.contextMenu({selector:".menuViewFont",trigger:"none",className:"code_font_list",callback:n,items:i}),$.contextMenu({selector:".menuViewTheme",trigger:"none",className:"code_theme_list",callback:n,items:o}),$("ul.code_font_list .context-menu-item").mouseenter(function(){Editor.current().setFontSize($(this).text()),$(this).unbind("click").click(function(){var e=$(this).text();Editor.set_config("font_size",e),Editor.current()&&Editor.current().focus()})}).mouseleave(function(){Editor.current().setFontSize(G.code_config.font_size)});var d=function(e){var t=["ambiance","idle_fingers","monokai","pastel_on_dark","solarized_dark","tomorrow_night_blue","tomorrow_night_eighties"];inArray(t,e)?$("body").addClass("code_theme_black"):$("body").removeClass("code_theme_black")};$("ul.code_theme_list .context-menu-item").mouseenter(function(){var e=$(this).find("span").html();d(e),Editor.current()&&Editor.current().setTheme("ace/theme/"+e),$(this).unbind("click").click(function(){var e=$(this).find("span").html();Editor.set_config("theme",e),Editor.current()&&Editor.current().focus(),d(e)})}).mouseleave(function(){Editor.current()&&Editor.current().setTheme("ace/theme/"+G.code_config.theme),d(G.code_config.theme)})},i=function(e){var t=Editor.current().getValue(),a=""==Editor.current().session.getTextRange()?!0:!1;a||(t=Editor.current().session.getTextRange());var i={brace_style:"collapse",break_chained_methods:!1,indent_char:" ",indent_scripts:"keep",indent_size:"4",keep_array_indentation:!0,preserve_newlines:!0,space_after_anon_function:!0,space_before_conditional:!0,unescape_strings:!1,wrap_line_length:"120"};switch(e){case"beautify_html":t=html_beautify(t,i);break;case"beautify_css":t=css_beautify(t);break;case"beautify_js":t=js_beautify(t)}a?Editor.current().setValue(t):Editor.current().insert(t)},n=function(e){if(0==$(".markdown_full_page").length){if("newfile"==e)return Editor.add(),void 0;if(Editor.current())switch(e){case"fullscreen":$(".icon-resize-full").toggleClass("icon-resize-small"),ShareData.frameTop("",function(e){e.core.editorFull()});break;case"save":Editor.save();break;case"saveall":Editor.saveall();break;case"undo":Editor.current().undo();break;case"redo":Editor.current().redo();break;case"refresh":Editor.refresh();break;case"delete":Editor.current().execCommand("del");break;case"selectAll":Editor.current().execCommand("selectall");break;case"startAutocomplete":Editor.current().execCommand("startAutocomplete");break;case"search":Editor.current().execCommand("find");break;case"searchReplace":Editor.current().execCommand("replace");break;case"auto_wrap":Editor.set_config("auto_wrap");break;case"display_char":Editor.set_config("display_char");break;case"setting":Editor.do_action("setting");break;case"soft_tab":Editor.set_config("soft_tab");break;case"auto_complete":Editor.set_config("auto_complete");break;case"keyboard_type_ace":Editor.set_config("keyboard_type","ace");break;case"keyboard_type_vim":Editor.set_config("keyboard_type","vim");break;case"keyboard_type_emacs":Editor.set_config("keyboard_type","emacs");break;case"beautify_html":i(e);break;case"beautify_css":i(e);break;case"beautify_js":i(e);break;case"open_ie":var t=urlDecode(urlDecode(Editor.current().kod.filename));t=core.path2url(t),window.open(t);break;case"function_list":var a=Editor.current().kod.preview;a.openFunctionList();break;case"preview":var a=Editor.current().kod.preview;a.previewForce();break;case"close":Editor.remove();break;case"about":core.setting("about");break;case"learnMore":window.open("http://kalcaddle.com/editor.html");break;default:}}},o=function(){var e=G.code_config,t=["display_char","function_list","auto_complete","auto_wrap","soft_tab"];$(".context-menu-root .context-menu-item").removeClass("selected");for(var a=0;t.length>a;a++)"1"==e[t[a]]&&$(".context-menu-root ."+t[a]).addClass("selected");$(".set_code_theme_"+e.theme).addClass("selected"),$(".set_code_font_"+e.font_size.substr(0,2)).addClass("selected"),$(".tab_size_"+e.tab_size).addClass("selected"),$(".keyboard_type_"+e.keyboard_type).addClass("selected");var i=replaceAll(e.font_family," ","_");if($(".set_font_family_"+i).addClass("selected"),Editor.current()){var n=Editor.aceModeList.modesByName[Editor.current().kod.mode].caption;$(".code_mode_list .list_cell").removeClass("selected").removeClass("hidden"),$(".code_mode_list [mode_name="+Editor.current().kod.mode+"]").addClass("selected"),$(".bottom_toolbar .file_mode").html(n),$(".bottom_toolbar .config_tab").html("Tabs:"+e.tab_size)}};return{doAction:n,toolbarSelected:o,init:function(){e(),Mousetrap.bind(["ctrl+s","command+s"],function(e){e.preventDefault(),e.returnvalue=!1,Editor.save()}),Mousetrap.bind(["ctrl+shift+e","command+shift+e"],function(e){e.preventDefault(),e.returnvalue=!1,Toolbar.doAction("function_list")}),Mousetrap.bind(["f5"],function(){Editor.refresh()})}}});
